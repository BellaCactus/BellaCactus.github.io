<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>bella cactus</title>
  <meta name="color-scheme" content="dark" />
  <style>
    :root{
      --bg:#050507;
      --bg2:#0a0a0f;
      --panel:rgba(255,255,255,0.05);
      --border:rgba(255,255,255,0.10);

      --text:#f7f7ff;
      --muted:rgba(247,247,255,0.72);

      --pink:#ff78c8;
      --pink2:#ffd0ee;
      --hot:#ff3db8;

      --shadow: 0 22px 80px rgba(0,0,0,0.65);
      --radius:18px;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(900px 600px at 10% 10%, rgba(255,120,200,0.16), transparent 60%),
        radial-gradient(900px 650px at 85% 25%, rgba(255,208,238,0.10), transparent 60%),
        radial-gradient(1100px 700px at 45% 100%, rgba(255,61,184,0.10), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden;
    }

    a{color:var(--pink); text-decoration:none}
    a:hover{text-decoration:underline}
    img{max-width:100%; display:block}

    /* animated pink/white text */
    .pulseText{
      background: linear-gradient(90deg, #ffffff, var(--pink), #ffffff, var(--pink2), #ffffff);
      background-size: 260% 100%;
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      animation: shimmer 4.8s ease-in-out infinite;
      text-shadow: 0 0 18px rgba(255,120,200,0.10);
    }
    @keyframes shimmer{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    @media (prefers-reduced-motion: reduce){
      .pulseText{animation:none; color:var(--text); background:none; -webkit-background-clip:initial; background-clip:initial}
      .floaty{animation:none}
      .scanline{animation:none}
      .introAscii{animation:none}
      .introBlink{animation:none}
    }

    .wrap{
      max-width:1040px;
      margin:0 auto;
      padding:44px 16px 120px;
      position:relative;
      z-index:1;
      display:none; /* hidden until intro finishes */
    }
    .wrap.ready{display:block}

    /* top */
    .top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      margin-bottom:16px;
      flex-wrap:wrap;
    }
    .brand{
      display:flex; gap:14px; align-items:center;
      min-width:0;
    }

    /* badge = twi looking image */
    .badge{
      width:58px; height:58px;
      border-radius:16px;
      border:1px solid rgba(255,120,200,0.25);
      box-shadow: var(--shadow);
      overflow:hidden;
      background: rgba(0,0,0,0.25);
      cursor:pointer;
      flex: 0 0 auto;
    }
    .badge img{
      width:100%;
      height:100%;
      object-fit:cover;
      transform: scale(1.02);
      filter: saturate(1.05) contrast(1.05);
    }
    .badge:hover{
      border-color: rgba(255,120,200,0.45);
    }

    h1{
      margin:0;
      font-size:2.1rem;
      letter-spacing:.4px;
      line-height:1.1;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:min(680px, 80vw);
    }
    .sub{
      margin:6px 0 0;
      color:var(--muted);
      font-size:0.98rem;
      max-width:720px;
    }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
      margin-top:6px;
    }
    .chip{
      font-size:0.82rem;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,0.04);
      color:var(--muted);
      backdrop-filter: blur(6px);
    }
    .chip strong{color:var(--text); font-weight:600}
    .dot{
      display:inline-block;
      width:6px; height:6px;
      border-radius:999px;
      margin-right:6px;
      background:var(--pink);
      box-shadow:0 0 14px rgba(255,120,200,0.65);
    }

    /* nav */
    .nav{
      margin-top:14px;
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.05);
      color:var(--text);
      transition: transform .08s ease, border .2s ease, background .2s ease;
      user-select:none;
      cursor:pointer;
    }
    .pill:hover{
      transform: translateY(-1px);
      border-color: rgba(255,120,200,0.34);
      background: rgba(255,120,200,0.10);
      text-decoration:none;
    }
    .pill .k{
      font-family:var(--mono);
      font-size:.82rem;
      color:var(--pink2);
    }

    /* panels */
    .grid{
      display:grid;
      grid-template-columns: 1.25fr 0.75fr;
      gap:14px;
      margin-top:14px;
    }
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
      .chips{justify-content:flex-start}
    }

    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .panelTitle{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,0.06);
      background: rgba(0,0,0,0.18);
    }
    .panelTitle h2{
      margin:0;
      font-size:1.05rem;
      color:var(--pink2);
      letter-spacing:0.3px;
    }
    .small{font-size:.86rem; color:var(--muted)}
    .panelInner{padding:16px}

    /* terminal */
    .terminalWrap{
      background:
        radial-gradient(900px 300px at 20% 0%, rgba(255,120,200,0.16), transparent 55%),
        rgba(0,0,0,0.38);
      border:1px solid rgba(255,255,255,0.06);
      border-radius: 16px;
      overflow:hidden;
      position:relative;
    }
    .scanline{
      position:absolute; left:0; right:0;
      top:-20%;
      height:18%;
      background: linear-gradient(180deg, transparent, rgba(255,255,255,0.06), transparent);
      opacity:0.65;
      pointer-events:none;
      animation: scan 5.5s linear infinite;
      mix-blend-mode:screen;
    }
    @keyframes scan{
      0%{transform:translateY(0)}
      100%{transform:translateY(720px)}
    }

    .terminal{
      font-family:var(--mono);
      padding:14px 14px 12px;
      min-height:210px;
    }
    .termLine{
      display:flex;
      gap:8px;
      align-items:flex-start;
      margin:6px 0;
      white-space:pre-wrap;
      word-break:break-word;
    }
    .prompt{color:var(--pink2)}
    .cmd{color:rgba(255,255,255,0.92)}
    .cursor{
      display:inline-block;
      width:9px;
      height:1.1em;
      background: var(--pink);
      margin-left:2px;
      vertical-align:-2px;
      animation: blink 1s steps(1) infinite;
      box-shadow:0 0 14px rgba(255,120,200,0.55);
    }
    @keyframes blink{50%{opacity:0}}

    .asciiBox{
      border-top:1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.40);
      padding:12px 14px 14px;
    }
    pre.ascii{
      margin:0;
      font-family:var(--mono);
      font-size:12px;
      line-height:1.15;
      white-space:pre;
      color:rgba(255,255,255,0.90);
    }
    .asciiPink{
      color:var(--pink2);
      text-shadow: 0 0 10px rgba(255,120,200,0.25);
    }

    /* lists + tags */
    ul.clean{list-style:none; margin:0; padding:0}
    ul.clean li{
      padding:10px 0;
      border-bottom:1px dashed rgba(255,255,255,0.10);
    }
    ul.clean li:last-child{border-bottom:none}
    .tag{
      display:inline-block;
      font-size:0.72rem;
      padding:2px 8px;
      border-radius:999px;
      background: rgba(255,255,255,0.05);
      color:var(--pink2);
      margin-left:6px;
      border:1px solid rgba(255,255,255,0.08);
    }

    /* tasteful image cards */
    .mediaRow{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:12px;
    }
    @media (max-width: 900px){ .mediaRow{grid-template-columns:1fr} }

    .imgCard{
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.32);
      overflow:hidden;
      cursor:pointer;
      transition: transform .12s ease, border .2s ease, background .2s ease;
      box-shadow: 0 10px 34px rgba(0,0,0,0.35);
      position:relative;
    }
    .imgCard:hover{
      transform: translateY(-2px);
      border-color: rgba(255,120,200,0.30);
      background: rgba(255,120,200,0.06);
    }
    .imgCard img{
      width:100%;
      aspect-ratio: 16 / 10;
      object-fit:cover;
      filter: saturate(1.05) contrast(1.02);
    }
    .imgCap{
      padding:10px 10px 12px;
      font-size:0.92rem;
      color:rgba(255,255,255,0.88);
    }
    .imgCap .muted{color:var(--muted); font-size:0.82rem; margin-top:4px}

    /* lightbox */
    .lightbox{
      position:fixed; inset:0;
      background: rgba(0,0,0,0.75);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:80;
    }
    .lightbox.open{display:flex}
    .lbPanel{
      max-width:min(1020px, 96vw);
      max-height: 90vh;
      width:100%;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(10,10,14,0.78);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:grid;
      grid-template-rows: auto 1fr auto;
    }
    .lbTop{
      padding:12px 14px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      border-bottom:1px solid rgba(255,255,255,0.08);
    }
    .lbTitle{font-family:var(--mono); color:rgba(255,255,255,0.92); font-size:.92rem}
    .xbtn{
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color:var(--text);
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
    }
    .xbtn:hover{border-color: rgba(255,120,200,0.34); background: rgba(255,120,200,0.10)}
    .lbBody{
      display:grid;
      place-items:center;
      padding:12px;
      background: rgba(0,0,0,0.35);
    }
    .lbBody img{
      max-width:100%;
      max-height: 64vh;
      object-fit:contain;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.35);
    }
    .lbFoot{
      padding:12px 14px;
      border-top:1px solid rgba(255,255,255,0.08);
      color:var(--muted);
      font-size:.9rem;
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .lbFoot .hint{font-family:var(--mono); font-size:.82rem}

    /* oneko corner */
    .oneko{
      position:fixed;
      right:12px;
      bottom:12px;
      width:66px;
      height:66px;
      z-index:90;
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.35);
      display:grid;
      place-items:center;
      box-shadow: 0 18px 60px rgba(0,0,0,0.55);
      backdrop-filter: blur(6px);
      user-select:none;
      cursor:pointer;
    }
    .oneko img{
      width:52px;
      image-rendering:pixelated;
      pointer-events:none;
      filter: drop-shadow(0 12px 22px rgba(0,0,0,0.55));
    }
    .floaty{animation: floaty 3.6s ease-in-out infinite}
    @keyframes floaty{
      0%{transform: translateY(0)}
      50%{transform: translateY(-6px)}
      100%{transform: translateY(0)}
    }

    .footer{
      margin-top:22px;
      text-align:center;
      color:var(--muted);
      font-size:0.86rem;
    }

    /* ---------- INTRO (startup animation) ---------- */
    .intro{
      position:fixed;
      inset:0;
      background:
        radial-gradient(900px 600px at 10% 10%, rgba(255,120,200,0.16), transparent 60%),
        radial-gradient(900px 650px at 85% 25%, rgba(255,208,238,0.10), transparent 60%),
        linear-gradient(180deg, #050507, #0a0a0f);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:120;
      padding:18px;
    }
    .intro.hidden{display:none}

    .introPanel{
      width:min(980px, 96vw);
      border-radius:20px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.45);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .introTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.35);
      font-family:var(--mono);
      font-size:0.9rem;
      color:rgba(255,255,255,0.88);
    }
    .introBtns{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .introBtn{
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color:var(--text);
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-family:var(--mono);
      font-size:0.85rem;
    }
    .introBtn:hover{border-color: rgba(255,120,200,0.34); background: rgba(255,120,200,0.10)}

    .introBody{
      position:relative;
      background: rgba(0,0,0,0.40);
      padding:12px;
      display:grid;
      grid-template-columns: 1.4fr 0.6fr;
      gap:12px;
    }
    @media (max-width: 900px){
      .introBody{grid-template-columns:1fr}
    }

    .introVideoBox{
      border-radius:16px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.35);
      position:relative;
    }
    .introVideoBox video{
      width:100%;
      height:auto;
      display:block;
    }

    .introAsciiBox{
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.35);
      overflow:hidden;
      position:relative;
    }
    .introAsciiHead{
      padding:10px 12px;
      border-bottom:1px solid rgba(255,255,255,0.08);
      font-family:var(--mono);
      color:rgba(255,255,255,0.85);
      background: rgba(0,0,0,0.25);
    }
    .introAscii{
      padding:12px;
      font-family:var(--mono);
      font-size:12px;
      line-height:1.2;
      white-space:pre;
      color:rgba(255,255,255,0.90);
      min-height: 190px;
    }
    .introBlink{
      display:inline-block;
      width:8px;
      height:1em;
      background: var(--pink);
      vertical-align:-2px;
      margin-left:3px;
      animation: blink 1s steps(1) infinite;
      box-shadow:0 0 14px rgba(255,120,200,0.55);
    }

    .introFoot{
      padding:12px 14px;
      border-top:1px solid rgba(255,255,255,0.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      color:var(--muted);
      font-size:0.9rem;
    }

    /* mini audio HUD */
    .hud{
      position:fixed;
      left:12px;
      bottom:12px;
      z-index:95;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.35);
      backdrop-filter: blur(6px);
      box-shadow: 0 18px 60px rgba(0,0,0,0.45);
      font-family:var(--mono);
      font-size:0.82rem;
      color:rgba(255,255,255,0.85);
      user-select:none;
    }
    .hud button{
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color:var(--text);
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-family:var(--mono);
      font-size:0.82rem;
    }
    .hud button:hover{border-color: rgba(255,120,200,0.34); background: rgba(255,120,200,0.10)}
    .hud .now{color:rgba(255,255,255,0.9)}
    .hud .tagPink{color:var(--pink2)}
  </style>
</head>

<body>
  <!-- INTRO STARTUP ANIMATION -->
  <section class="intro" id="intro">
    <div class="introPanel">
      <div class="introTop">
        <div><span class="pulseText">startup</span> :: hello everypony</div>
        <div class="introBtns">
          <button class="introBtn" id="introPlay">play</button>
          <button class="introBtn" id="introSkip">skip</button>
        </div>
      </div>

      <div class="introBody">
        <div class="introVideoBox">
          <video id="introVid" preload="metadata" playsinline>
            <source src="hello-everypony-mlp-dexter.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="introAsciiBox">
          <div class="introAsciiHead">boot log</div>
          <div class="introAscii" id="introAscii"></div>
        </div>
      </div>

      <div class="introFoot">
        <div>tip: soundtrack needs one click because browsers are annoying</div>
        <div class="small">keys: <span class="pulseText">esc</span> skip</div>
      </div>
    </div>
  </section>

  <!-- AUDIO HUD -->
  <div class="hud" id="hud">
    <span>soundtrack: <span class="now" id="songName">not started</span></span>
    <button id="musicBtn">start</button>
    <button id="musicNext">reroll</button>
  </div>

  <div class="wrap" id="site">
    <header class="top">
      <div class="brand">
        <a class="badge" href="#twi" title="twi looking" aria-label="twi looking">
          <img src="twi%20looking.png" alt="twi looking" />
        </a>

        <div style="min-width:0">
          <h1 class="pulseText">bella cactus</h1>
          <div class="sub">
            reverse engineering + coding + servers + technical minecraft + whatever brain buff i rolled this week :3
          </div>

          <nav class="nav" aria-label="site">
            <a class="pill" href="#links"><span class="k">cd</span> links</a>
            <a class="pill" href="#projects"><span class="k">ls</span> projects</a>
            <a class="pill" href="#twi"><span class="k">cat</span> vibes</a>
          </nav>
        </div>
      </div>

      <div class="chips">
        <div class="chip"><span class="dot"></span><strong class="pulseText">black / white / pink</strong></div>
        <div class="chip">timezone: <strong>nz</strong></div>
        <div class="chip">last update: <strong id="date"></strong></div>
      </div>
    </header>

    <main class="grid" id="links">
      <!-- left -->
      <section class="panel">
        <div class="panelTitle">
          <h2>terminal</h2>
          <div class="small">press <span class="pulseText">esc</span> to close popups</div>
        </div>

        <div class="panelInner">
          <div class="terminalWrap" role="region" aria-label="terminal panel">
            <div class="scanline"></div>
            <div class="terminal">
              <div class="termLine">
                <span class="prompt">bella@cactus</span><span class="cmd">:</span><span class="cmd">~</span><span class="cmd">$</span>
                <span class="cmd" id="typed"></span><span class="cursor" aria-hidden="true"></span>
              </div>
              <div id="termOut"></div>
            </div>

            <div class="asciiBox">
              <pre class="ascii" id="ascii"></pre>
            </div>
          </div>

          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
            <a class="pill" href="https://github.com/BellaCactus/bella-limiter-" target="_blank" rel="noreferrer">
              <span class="k">git</span> bella-limiter
            </a>
            <a class="pill" href="https://www.youtube.com/@BellaCactusYT" target="_blank" rel="noreferrer">
              <span class="k">yt</span> @BellaCactusYT
            </a>
            <a class="pill" href="https://www.youtube.com/@BellaCactusYT/videos" target="_blank" rel="noreferrer">
              <span class="k">yt</span> videos
            </a>
            <a class="pill" href="https://www.youtube.com/@BellaCactusYT/shorts" target="_blank" rel="noreferrer">
              <span class="k">yt</span> shorts
            </a>
          </div>
        </div>
      </section>

      <!-- right -->
      <aside class="panel">
        <div class="panelTitle">
          <h2>about</h2>
          <div class="small pulseText">hi :3</div>
        </div>
        <div class="panelInner">
          <p style="margin-top:0">
            i’m <span class="pulseText">bella</span>. i make tools, overlays, and weird little projects.
          </p>

          <ul class="clean">
            <li>
              <strong class="pulseText">studying</strong>
              <span class="tag">level 6</span>
              <span class="tag">computing</span>
            </li>
            <li>
              <strong class="pulseText">games</strong>
              <span class="tag">destiny 2</span>
              <span class="tag">geometry dash</span>
              <span class="tag">minecraft (technical)</span>
            </li>
            <li>
              <strong class="pulseText">passions</strong>
              <span class="tag">reverse engineering</span>
              <span class="tag">software</span>
              <span class="tag">hardware</span>
              <span class="tag">servers</span>
              <span class="tag">automation</span>
            </li>
          </ul>

          <p style="margin:12px 0 0; color:var(--muted)">
            this is the temp front page until wordpress comes back online.
          </p>
        </div>
      </aside>
    </main>

    <section class="panel" id="projects" style="margin-top:14px">
      <div class="panelTitle">
        <h2>projects</h2>
        <div class="small">stuff i’m shipping / polishing</div>
      </div>
      <div class="panelInner">
        <ul class="clean">
          <li>
            <strong class="pulseText">bella limiter</strong>
            <span class="tag">wpf overlay</span>
            <span class="tag">network-y</span>
            <div class="small" style="margin-top:6px">
              repo:
              <a href="https://github.com/BellaCactus/bella-limiter-" target="_blank" rel="noreferrer">
                github.com/BellaCactus/bella-limiter-
              </a>
            </div>
          </li>

          <li>
            <strong class="pulseText">youtube</strong>
            <span class="tag">gaming</span>
            <span class="tag">experiments</span>
            <div class="small" style="margin-top:6px">
              channel:
              <a href="https://www.youtube.com/@BellaCactusYT" target="_blank" rel="noreferrer">
                youtube.com/@BellaCactusYT
              </a>
            </div>
          </li>
        </ul>
      </div>
    </section>

    <!-- tasteful images (not a gallery section) -->
    <section class="panel" id="twi" style="margin-top:14px">
      <div class="panelTitle">
        <h2>vibes</h2>
        <div class="small">click to zoom</div>
      </div>
      <div class="panelInner">
        <div class="mediaRow" id="imgRow"></div>
      </div>
    </section>

    <div class="footer">
      © <span class="pulseText">bella cactus</span>
    </div>
  </div>

  <!-- oneko easter egg -->
  <div class="oneko floaty" id="onekoBtn" title="click me >:3" aria-label="oneko easter egg">
    <img id="onekoImg" alt="oneko" />
  </div>

  <!-- lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lbPanel" role="dialog" aria-modal="true" aria-label="image viewer">
      <div class="lbTop">
        <div class="lbTitle" id="lbTitle">viewer</div>
        <button class="xbtn" id="lbClose" type="button">close</button>
      </div>
      <div class="lbBody">
        <img id="lbImg" alt="preview" />
      </div>
      <div class="lbFoot">
        <div id="lbCaption">...</div>
        <div class="hint">esc closes</div>
      </div>
    </div>
  </div>

  <!-- audio elements (created by JS too, but keeping explicit is nice) -->
  <audio id="bgMusic" preload="metadata" loop></audio>
  <audio id="easterMusic" preload="metadata" loop>
    <source src="lil-jon-yeah.mp3" type="audio/mpeg" />
  </audio>

  <script>
    // date
    const d = new Date();
    document.getElementById("date").textContent =
      d.toLocaleDateString(undefined, { year:"numeric", month:"short", day:"2-digit" });

    function escapeHtml(s){
      return s.replace(/[&<>"']/g, m => ({
        "&":"&amp;", "<":"&lt;", ">":"&gt;", "\"":"&quot;", "'":"&#39;"
      }[m]));
    }

    // -----------------------------
    // INTRO: video startup + ascii boot log
    // -----------------------------
    const intro = document.getElementById("intro");
    const site = document.getElementById("site");
    const introVid = document.getElementById("introVid");
    const introPlay = document.getElementById("introPlay");
    const introSkip = document.getElementById("introSkip");
    const introAscii = document.getElementById("introAscii");

    const bootLines = [
      "[boot] allocating braincells... ok",
      "[boot] loading pink shader... ok",
      "[boot] mounting /home/bella... ok",
      "[boot] starting video sequence...",
      "[boot] after video: reveal site UI",
      "[hint] click HUD 'start' for music",
      "[hint] click oneko for secret audio"
    ];

    let bootIndex = 0;
    function bootTick(){
      const shown = bootLines.slice(0, bootIndex + 1).join("\n");
      introAscii.textContent = shown + "\n> " + "_";
      bootIndex = Math.min(bootIndex + 1, bootLines.length - 1);
    }
    bootTick();
    const bootTimer = setInterval(bootTick, 480);

    function finishIntro(){
      clearInterval(bootTimer);
      intro.classList.add("hidden");
      site.classList.add("ready");
      try { introVid.pause(); } catch {}
    }

    introSkip.addEventListener("click", finishIntro);
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape"){
        // close intro OR lightbox
        if (!intro.classList.contains("hidden")) finishIntro();
        closeLightbox();
      }
    });

    introPlay.addEventListener("click", async () => {
      try { await introVid.play(); } catch {}
    });

    introVid.addEventListener("ended", finishIntro);

    // auto-attempt play (may fail due to browser)
    (async () => {
      try { await introVid.play(); } catch {}
    })();

    // -----------------------------
    // oneko sprite cycling
    // -----------------------------
    const onekoFiles = [
      "oneko.gif",
      "oneko%20-%20Copy.gif",
      "onekoss.png",
      "onekosss.png",
      "onekossssurpised.png",
      "onekossssthibnk.png",
      "oneko%20-%20Copyd.png"
    ];
    let onekoIndex = 0;
    const onekoImg = document.getElementById("onekoImg");
    const onekoBtn = document.getElementById("onekoBtn");

    function setOneko(i){
      onekoIndex = (i + onekoFiles.length) % onekoFiles.length;
      onekoImg.src = onekoFiles[onekoIndex];
    }
    setOneko(0);
    onekoImg.addEventListener("error", () => setOneko(onekoIndex + 1));

    // -----------------------------
    // tasteful images row (click-to-zoom)
    // -----------------------------
    const images = [
      { file: "ponies%20in%20bed.jpg", title: "ponies in bed", note: "sleep debuff zone" },
      { file: "twi%20and%20trixy.jpg", title: "twi and trixy", note: "chaos duo" },
      { file: "yuri%20meme.png", title: "yuri meme", note: "artifact" },
      { file: "twi%20looking.png", title: "twi looking", note: "stare damage" }
    ];

    const imgRow = document.getElementById("imgRow");
    function makeImgCard(item){
      const card = document.createElement("div");
      card.className = "imgCard";
      card.tabIndex = 0;

      const img = document.createElement("img");
      img.src = item.file;
      img.alt = item.title || "image";
      img.addEventListener("error", () => {
        img.style.opacity = "0.25";
        img.style.filter = "grayscale(1)";
      });

      const cap = document.createElement("div");
      cap.className = "imgCap";
      cap.innerHTML = `<div class="pulseText" style="font-weight:650">${escapeHtml(item.title||"")}</div>
                       <div class="muted">${escapeHtml(item.note||"")}</div>`;

      card.appendChild(img);
      card.appendChild(cap);

      card.addEventListener("click", () => openLightbox(item));
      card.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") openLightbox(item);
      });

      return card;
    }
    images.forEach(i => imgRow.appendChild(makeImgCard(i)));

    // -----------------------------
    // lightbox
    // -----------------------------
    const lb = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");
    const lbTitle = document.getElementById("lbTitle");
    const lbCaption = document.getElementById("lbCaption");
    const lbClose = document.getElementById("lbClose");

    function openLightbox(item){
      lb.classList.add("open");
      lb.setAttribute("aria-hidden","false");
      lbTitle.textContent = item.title || "viewer";
      lbCaption.textContent = item.note || "";
      lbImg.src = item.file;
    }
    function closeLightbox(){
      if (!lb.classList.contains("open")) return;
      lb.classList.remove("open");
      lb.setAttribute("aria-hidden","true");
      lbImg.src = "";
    }
    lbClose.addEventListener("click", closeLightbox);
    lb.addEventListener("click", (e) => { if (e.target === lb) closeLightbox(); });

    // -----------------------------
    // terminal typing + ascii frames
    // -----------------------------
    const typedEl = document.getElementById("typed");
    const outEl = document.getElementById("termOut");

    const scriptLines = [
      { cmd: "whoami", out: "bella (aka BellaCactus)" },
      { cmd: "cat interests.txt", out: "reverse engineering, coding, software, hardware, servers, technical minecraft" },
      { cmd: "ls games/", out: "destiny2  geometry-dash  minecraft-tech" },
      { cmd: "open youtube", out: "https://www.youtube.com/@BellaCactusYT" },
      { cmd: "open limiter", out: "https://github.com/BellaCactus/bella-limiter-" }
    ];

    let lineIndex = 0, charIndex = 0;

    function pushOutput(text){
      const div = document.createElement("div");
      div.className = "termLine";
      div.innerHTML = `<span class="prompt">></span> <span class="cmd">${escapeHtml(text)}</span>`;
      outEl.appendChild(div);
    }

    function typeLoop(){
      const current = scriptLines[lineIndex].cmd;
      typedEl.textContent = current.slice(0, charIndex);

      if (charIndex < current.length){
        charIndex++;
        setTimeout(typeLoop, 34);
      } else {
        setTimeout(() => {
          pushOutput(scriptLines[lineIndex].out);
          lineIndex = (lineIndex + 1) % scriptLines.length;
          charIndex = 0;
          typedEl.textContent = "";
          setTimeout(typeLoop, 520);
        }, 420);
      }
    }
    typeLoop();

    const asciiEl = document.getElementById("ascii");
    const frames = [
`  ┌───────────────────────────────┐
  │  <span class="asciiPink">bella cactus</span>  // status: building  │
  ├───────────────────────────────┤
  │ hp: ██████████░░  buff: pink   │
  │ dbg: watching packets          │
  │ srv: online-ish                │
  │ mood: ✦ terminal goblin ✦      │
  └───────────────────────────────┘`,
`  ┌───────────────────────────────┐
  │  <span class="asciiPink">bella cactus</span>  // status: shipping  │
  ├───────────────────────────────┤
  │ hp: ███████████░  buff: focus  │
  │ re: peeking inside binaries    │
  │ code: compiling little demons  │
  │ note: oneko = secret audio     │
  └───────────────────────────────┘`,
`  ┌───────────────────────────────┐
  │  <span class="asciiPink">bella cactus</span>  // status: vibing    │
  ├───────────────────────────────┤
  │ hp: ████████░░░░  debuff: sleep│
  │ gd: practicing clicks          │
  │ d2: chasing numbers            │
  │ mc: technical crimes (legal)   │
  └───────────────────────────────┘`
    ];
    let frame = 0;
    function drawAscii(){
      asciiEl.innerHTML = frames[frame];
      frame = (frame + 1) % frames.length;
    }
    drawAscii();
    setInterval(drawAscii, 1800);

    // -----------------------------
    // soundtrack (random pick of 4) + HUD
    // -----------------------------
    const bgMusic = document.getElementById("bgMusic");
    const songNameEl = document.getElementById("songName");
    const musicBtn = document.getElementById("musicBtn");
    const musicNext = document.getElementById("musicNext");

    const songs = [
      { file: "530%200.mp3", name: "530 0 (kanye)" },
      { file: "bipolar.mp3", name: "bipolar (wifiskeleton)" },
      { file: "Tay-K%20-%20I%20Love%20My%20Choppa%20%5BOfficial%20Audio%5D%204.mp3", name: "tay-k - i love my choppa" },
      { file: "Who%20I%20Smoke%20(Official%20Music%20Video).mp3", name: "who i smoke" }
    ];

    function pickRandomSong(){
      const s = songs[Math.floor(Math.random() * songs.length)];
      bgMusic.src = s.file;
      songNameEl.textContent = s.name;
    }
    pickRandomSong();

    async function startMusic(){
      bgMusic.volume = 0.22;
      try {
        await bgMusic.play();
        musicBtn.textContent = "pause";
      } catch {
        // if play fails, leave button as start
      }
    }

    musicBtn.addEventListener("click", async () => {
      if (bgMusic.paused){
        await startMusic();
      } else {
        bgMusic.pause();
        musicBtn.textContent = "start";
      }
    });

    musicNext.addEventListener("click", async () => {
      pickRandomSong();
      if (!bgMusic.paused) {
        await startMusic();
      }
    });

    // if a track errors (bad filename), reroll
    bgMusic.addEventListener("error", () => {
      pickRandomSong();
    });

    // -----------------------------
    // oneko easter egg: click = swap sprite + toggle lil jon yeah
    // -----------------------------
    const easterMusic = document.getElementById("easterMusic");
    let easterOn = false;

    onekoBtn.addEventListener("click", async () => {
      setOneko(onekoIndex + 1);

      // toggle lil jon
      if (!easterOn){
        easterMusic.volume = 0.30;
        try { await easterMusic.play(); easterOn = true; }
        catch { easterOn = false; }
      } else {
        easterMusic.pause();
        easterOn = false;
      }
    });

    // -----------------------------
    // badge click = open lightbox on twi looking
    // -----------------------------
    document.querySelector(".badge").addEventListener("click", (e) => {
      e.preventDefault();
      openLightbox({ file:"twi%20looking.png", title:"twi looking", note:"bc icon energy" });
    });
  </script>
</body>
</html>
